#pragma once

#include <persistent/config.hpp>
#include <memory>
#include <common/message/general/unhandled.hpp>

namespace persistent {
namespace impl {

using unhandled_t = common::message::general::unhandled;

struct persistent {
    persistent();
    ~persistent();

    void init(::persistent::config const& path);
    
    /*
        STORAGE LOGIC
    */
    void save(unhandled_t&& message);
    // //TODO: other message
    // void save(trade_t&& message);
    // void save(quote_diff_t&& message);


    static std::unique_ptr<persistent> instance_;

};

} // namespace impl
} // namespace persistent